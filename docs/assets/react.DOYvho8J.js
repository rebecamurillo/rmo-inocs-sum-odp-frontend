const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.DhzFE7Gx.js","assets/index.DtoOFyvK.js","assets/fieldset.rhK12lGi.js","assets/input.BeVNHija.js","assets/index.CtYQp5oc.js","assets/select.D3Lae1pM.js","assets/index.CIGW-MKW.css"])))=>i.map(i=>d[i]);
import{j as e,I as C}from"./input.BeVNHija.js";import{r}from"./index.DtoOFyvK.js";import{R as I}from"./RButton.DJcDZ0_W.js";import{B as N,T as V,a as Z,b as L,c as j,d as v,e as H}from"./textarea.D7Yl-Gog.js";import{S as z}from"./select.D3Lae1pM.js";import{F as y,L as A}from"./fieldset.rhK12lGi.js";import"./index.CtYQp5oc.js";function W({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{d:"M4.214 3.227a.75.75 0 0 0-1.156-.955 8.97 8.97 0 0 0-1.856 3.825.75.75 0 0 0 1.466.316 7.47 7.47 0 0 1 1.546-3.186ZM16.942 2.272a.75.75 0 0 0-1.157.955 7.47 7.47 0 0 1 1.547 3.186.75.75 0 0 0 1.466-.316 8.971 8.971 0 0 0-1.856-3.825Z"}),r.createElement("path",{fillRule:"evenodd",d:"M10 2a6 6 0 0 0-6 6c0 1.887-.454 3.665-1.257 5.234a.75.75 0 0 0 .515 1.076 32.91 32.91 0 0 0 3.256.508 3.5 3.5 0 0 0 6.972 0 32.903 32.903 0 0 0 3.256-.508.75.75 0 0 0 .515-1.076A11.448 11.448 0 0 1 16 8a6 6 0 0 0-6-6Zm0 14.5a2 2 0 0 1-1.95-1.557 33.54 33.54 0 0 0 3.9 0A2 2 0 0 1 10 16.5Z",clipRule:"evenodd"}))}const q=r.forwardRef(W);function G({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16Zm3.857-9.809a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 1 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const M=r.forwardRef(G);function Q({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{fillRule:"evenodd",d:"M3 3.5A1.5 1.5 0 0 1 4.5 2h6.879a1.5 1.5 0 0 1 1.06.44l4.122 4.12A1.5 1.5 0 0 1 17 7.622V16.5a1.5 1.5 0 0 1-1.5 1.5h-11A1.5 1.5 0 0 1 3 16.5v-13Zm10.857 5.691a.75.75 0 0 0-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 0 0-1.06 1.061l2.5 2.5a.75.75 0 0 0 1.137-.089l4-5.5Z",clipRule:"evenodd"}))}const X=r.forwardRef(Q);function J({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{fillRule:"evenodd",d:"M8.485 2.495c.673-1.167 2.357-1.167 3.03 0l6.28 10.875c.673 1.167-.17 2.625-1.516 2.625H3.72c-1.347 0-2.189-1.458-1.515-2.625L8.485 2.495ZM10 5a.75.75 0 0 1 .75.75v3.5a.75.75 0 0 1-1.5 0v-3.5A.75.75 0 0 1 10 5Zm0 9a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const T=r.forwardRef(J);function Y({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM9 9a.75.75 0 0 0 0 1.5h.253a.25.25 0 0 1 .244.304l-.459 2.066A1.75 1.75 0 0 0 10.747 15H11a.75.75 0 0 0 0-1.5h-.253a.25.25 0 0 1-.244-.304l.459-2.066A1.75 1.75 0 0 0 9.253 9H9Z",clipRule:"evenodd"}))}const B=r.forwardRef(Y);function ee({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{d:"m5.433 13.917 1.262-3.155A4 4 0 0 1 7.58 9.42l6.92-6.918a2.121 2.121 0 0 1 3 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 0 1-.65-.65Z"}),r.createElement("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0 0 10 3H4.75A2.75 2.75 0 0 0 2 5.75v9.5A2.75 2.75 0 0 0 4.75 18h9.5A2.75 2.75 0 0 0 17 15.25V10a.75.75 0 0 0-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5Z"}))}const F=r.forwardRef(ee);function te({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0ZM8.94 6.94a.75.75 0 1 1-1.061-1.061 3 3 0 1 1 2.871 5.026v.345a.75.75 0 0 1-1.5 0v-.5c0-.72.57-1.172 1.081-1.287A1.5 1.5 0 1 0 8.94 6.94ZM10 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const se=r.forwardRef(te);function ae({title:t,titleId:s,...a},l){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:l,"aria-labelledby":s},a),t?r.createElement("title",{id:s},t):null,r.createElement("path",{d:"M6.28 5.22a.75.75 0 0 0-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 1 0 1.06 1.06L10 11.06l3.72 3.72a.75.75 0 1 0 1.06-1.06L11.06 10l3.72-3.72a.75.75 0 0 0-1.06-1.06L10 8.94 6.28 5.22Z"}))}const K=r.forwardRef(ae),re={success:{bg:"bg-success/50",border:"border-green-200",text:"text-primary",buttonBg:"border-success hover:border-success/90 text-primary"},warning:{bg:"bg-warning/50",border:"border-orange-200",text:"text-warning",buttonBg:"border-warning hover:border-warning/90 text-primary"},danger:{bg:"bg-danger/50",border:"border-red-200",text:"text-danger",buttonBg:"border-danger hover:border-danger/90 text-primary"},info:{bg:"bg-info/50",border:"border-sky-200",text:"text-primary",buttonBg:"border-primary hover:border-primary/90 text-primary"},neutral:{bg:"bg-dark/50",border:"border-gray-200",text:"text-dark",buttonBg:"border-dark hover:border-dark/90 text-primary"}},ne={info:e.jsx(B,{className:"h-10 w-10"}),question:e.jsx(se,{className:"h-10 w-10"}),success:e.jsx(M,{className:"h-10 w-10"}),warning:e.jsx(T,{className:"h-10 w-10"}),danger:e.jsx(T,{className:"h-10 w-10"}),neutral:e.jsx(B,{className:"h-10 w-10"})};function le({title:t,icon:s,children:a,variant:l="info",actionText:m,onAction:c,className:i=""}){const o=re[l];return e.jsx("div",{className:`${o.bg} border ${o.border} rounded-lg p-2 ${i}`,role:"status","aria-live":"polite",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:`${o.text}`,children:ne[s??l]}),e.jsxs("div",{className:"flex-1 gap-0",children:[t&&e.jsx("h5",{className:`${o.text}`,children:t}),e.jsx("p",{className:`${o.text}`,children:a})]}),m&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx(I,{variant:"link",onClick:c,className:`${o.buttonBg}`,text:m,defaultArrow:!0})})]})})}function we({id:t,title:s,description:a,completed:l,inProgress:m,locked:c,cta:i,href:o,onAction:h,className:n}){const d=()=>{c||(o&&(window.location.href=o),h?.(t))};return e.jsxs("div",{className:`flex flex-col gap-4 rounded-lg border p-4 lg:p-6 relative transition-all duration-200 ${l?" border-success cursor-pointer":c?"bg-light/30 border-dark cursor-not-allowed":"border-warning cursor-pointer"} ${n}`,onClick:d,children:[e.jsx("h4",{className:"text-primary",children:s}),e.jsx("p",{className:"text-sm text-gray-600 whitespace-pre-line",children:a.replace(/\\/g,`
`)}),e.jsx(I,{href:o,variant:c?"link":l?"secondary":"primary",text:i,disabled:c,onClick:()=>!c&&h?.(t)}),l&&e.jsx("span",{className:"absolute top-1 lg:top-4 right-1 lg:right-4 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-success/30 text-success",children:"âœ… Completed"}),m&&e.jsx("span",{className:"absolute  top-1 lg:top-4 right-1 lg:right-4 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-warning/30 text-warning",children:"â³ In Progress"})]})}function D(...t){return t.filter(Boolean).join(" ")}const O={left:"justify-start",center:"justify-center",right:"justify-end"};function ie({tabs:t=[],defaultTabId:s,onChange:a,align:l="left"}){const m=s?Math.max(0,t.findIndex(n=>n.id===s)):0,[c,i]=r.useState(Math.min(Math.max(m,0),Math.max(0,t.length-1))),o=t[c]||t[0];function h(n){n<0||n>=t.length||(i(n),a?.(t[n].id))}return e.jsxs("div",{children:[e.jsx("div",{className:"border-b border-gray-200",children:e.jsx("nav",{"aria-label":"Tabs",className:D("-mb-px flex space-x-2",O[l]||O.left),children:t.map((n,d)=>e.jsx("button",{onClick:()=>h(d),"aria-current":d===c?"page":void 0,className:D(d===c?"border-secondary text-secondary":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700","group inline-flex items-center border-b-2 px-1 py-4 text-sm font-medium bg-transparent"),type:"button",children:e.jsx("span",{className:"truncate",children:n.label})},n.id))})}),e.jsx("div",{className:"mt-4",children:o?o.content:e.jsx("div",{})})]})}function oe({title:t,subtitle:s,icon:a,info1:l,info2:m,onClick:c,className:i="border-gray-200 bg-white"}){return e.jsxs("div",{role:c?"button":void 0,onClick:c,className:`flex items-center justify-between gap-4 rounded-lg border p-3 hover:shadow-sm ${i}`,children:[a&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-50",children:a})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("p",{className:"font-bold",children:t})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("small",{className:"font-bold",children:s})})]}),e.jsxs("div",{className:"ml-4 flex-shrink-0 text-right",children:[l?e.jsx("div",{children:e.jsx("small",{children:l})}):null,m?e.jsx("div",{children:e.jsx("small",{children:m})}):null]})]})}function Ne({progress:t=[],alerts:s=[]}){return e.jsx(ie,{align:"right",tabs:[{id:"progress",label:e.jsx(N,{icon:e.jsx(X,{}),size:"md",color:"transparent",className:"text-info","aria-label":"progress",children:"Progress"}),content:e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:t.map(a=>e.jsx(oe,{...a},a.title))})},{id:"alerts",label:e.jsx(N,{icon:e.jsx(q,{}),size:"md",color:"transparent",className:"text-warning","aria-label":"alerts",children:"Alerts"}),content:e.jsx("div",{className:"grid grid-cols-2 gap-4",children:s.map(a=>e.jsx(le,{title:a.title,variant:a.variant,actionText:a.actionText,children:a.children},a.id))})}]})}var E=(t=>(t.NSM="NSM",t.PUBLIC_TRANSPORT="PUBLIC_TRANSPORT",t.PRIVATE="PRIVATE",t))(E||{}),b=(t=>(t.IN_SERVICE="IN_SERVICE",t.NEW="NEW",t.OPTIMIZATION_SCHEDULED="OPTIMIZATION_SCHEDULED",t.NOT_AVAILABLE="NOT_AVAILABLE",t))(b||{});function ce({value:t,transportModeId:s,livingLabId:a,onChange:l,onCancel:m}){const[c,i]=r.useState(!1),[o,h]=r.useState(t?.status??b.NOT_AVAILABLE),[n,d]=r.useState(t?.id),u={[b.NOT_AVAILABLE]:{color:"light",shortLabel:"Not Available"},[b.IN_SERVICE]:{color:"info",shortLabel:"In Service"},[b.NEW]:{color:"success",shortLabel:"New"},[b.OPTIMIZATION_SCHEDULED]:{color:"warning",shortLabel:"To optimize"}},g=f=>{h(f)},x=()=>{if(!n){const f=Math.floor(Math.random()*1e6);d(f)}n&&o&&(l?.({id:n,status:o,transport_mode_id:s,living_lab_id:a}),i(!1))},p=()=>{h(t?.status??b.NOT_AVAILABLE),m?.(),i(!1)};return c?e.jsxs("form",{onSubmit:x,className:"flex flex-col items-start space-x-3 gap-2 w-40",children:[e.jsx(y,{className:"w-36",children:e.jsx(z,{name:"status",value:o,onChange:f=>g(f.target.value),children:Object.values(b).map(f=>e.jsx("option",{value:f,children:f},f))})}),e.jsxs("div",{className:"flex flex-row justify-end items-end w-full space-x-2",children:[e.jsx("button",{type:"submit","aria-label":"Save",onClick:x,className:"inline-flex items-center",children:e.jsx(M,{className:"h-5 w-5 text-success"})}),e.jsx("button",{type:"button","aria-label":"Cancel",onClick:p,className:"inline-flex items-center",children:e.jsx(K,{className:"h-5 w-5 text-dark"})})]})]}):e.jsxs("div",{className:"flex justify-end items-end gap-1 w-40",children:[e.jsx(N,{size:"sm",color:u[o]?.color,className:"","aria-label":`${o} status in living lab`,children:u[o]?.shortLabel}),e.jsx("button",{type:"button","aria-label":"Edit",onClick:()=>i(!0),className:"inline-flex items-center",children:e.jsx(F,{className:"h-5 w-5 text-[--color-primary]"})})]})}function P(t){if(!t)return"";const s=new Date(t);return Number.isNaN(s.getTime())?String(t):s.toISOString().slice(0,10)}function S({kpiId:t,initial:s,livingLabId:a,transportModeId:l,defaultDate:m,onChange:c}){const i=f=>s?.value!==void 0&&s?.value!==null?Math.round(Number(s.value)*100)/100:void 0,[o,h]=r.useState(!1),[n,d]=r.useState(i(s?.value)),[u,g]=r.useState(P(s?.date??m));r.useEffect(()=>{d(i(s?.value)),g(P(s?.date??m))},[s,m]);const x=f=>{f?.preventDefault();let w=s?.id;w||(w=Date.now()),c?.({id:w,value:Number(n),date:u,transport_mode_id:l}),h(!1)},p=()=>{d(i(s?.value)),s?.date?g(s?.date):g(""),h(!1)};return o?e.jsxs("form",{onSubmit:x,className:"flex flex-col items-start space-x-3 gap-2 w-34",children:[e.jsxs(y,{className:"w-32",children:[e.jsx(A,{children:"Value"}),e.jsx(C,{type:"number",name:"value",value:n,onChange:f=>d(Number(f.target.value)),className:"mt-0 m-O"})]}),e.jsxs(y,{className:"w-32",children:[e.jsx(A,{children:"Date"}),e.jsx(C,{type:"date",name:"date",value:u,onChange:f=>g(f.target.value)})]}),e.jsxs("div",{className:"flex flex-row justify-end items-end w-full space-x-2",children:[e.jsx("button",{type:"submit","aria-label":"Save",onClick:x,className:"inline-flex items-center",children:e.jsx(M,{className:"h-5 w-5 text-success"})}),e.jsx("button",{type:"button","aria-label":"Cancel",onClick:p,className:"inline-flex items-center",children:e.jsx(K,{className:"h-5 w-5 text-dark"})})]})]}):e.jsxs("div",{className:"flex items-start gap-1  w-34",children:[e.jsxs("div",{className:"flex flex-col flex-1",children:[e.jsx("p",{children:n??"-"}),n&&u&&e.jsx("span",{className:"text-[12px]",children:u})]}),e.jsx("button",{type:"button","aria-label":"Edit",onClick:()=>h(!0),className:"inline-flex items-center",children:e.jsx(F,{className:"h-5 w-5 text-[--color-primary]"})})]})}function U({onChangeBeforeDate:t,onChangeAfterDate:s}){const a=new Date().toISOString().slice(0,10),[l,m]=r.useState(a),[c,i]=r.useState(a),o=n=>{const d=n.target.value;m(d),t(d)},h=n=>{const d=n.target.value;i(d),s(d)};return e.jsxs("div",{className:"mb-4 flex flex-col lg:flex-row items-center gap-8",children:[e.jsxs(y,{children:[e.jsx(A,{children:"Collection date BEFORE Implementation"}),e.jsx("small",{children:"This date will be set by default for all new KPIs."}),e.jsx(C,{type:"date",name:"data-collection-date",value:l,onChange:o,className:"mt-0 m-O"})]}),e.jsxs(y,{children:[e.jsx(A,{children:"Collection date AFTER Implementation"}),e.jsx("small",{children:"This date will be set by default for all new KPIs."}),e.jsx(C,{type:"date",name:"data-collection-date",value:c,onChange:h,className:"mt-0 m-O"})]})]})}function de({type:t="PUBLIC_TRANSPORT",size:s="sm"}){const a={[E.NSM]:{color:"success",shortLabel:"NSM",description:"New Mobility Service"},[E.PUBLIC_TRANSPORT]:{color:"primary-light",shortLabel:"PT",description:"Public Transport"},[E.PRIVATE]:{color:"warning",shortLabel:"Private",description:"Private Transport (eg. car, bike)"}};return e.jsx(N,{size:s,color:a[t].color,className:"","aria-label":`${t} KPI badge`,tooltip:a[t].description,children:a[t].shortLabel})}function ye({modes:t=[],kpis:s=[],livingLabId:a,livingLabTransportModes:l=[],kpiResults:m=[]}){const c=new Date().toISOString().slice(0,10),[i,o]=r.useState(c),[h,n]=r.useState(c),d=new Map(l.map(x=>[x.transport_mode_id,x])),[u,g]=r.useState(new Map(m.map(x=>[x.id,x])));return e.jsxs("div",{className:"bg-white shadow rounded-md",children:[e.jsx(U,{onChangeBeforeDate:o,onChangeAfterDate:n}),e.jsx("div",{className:"p-4 overflow-x-auto",children:e.jsxs(V,{dense:!0,striped:!0,className:"[--gutter:--spacing(6)] sm:[--gutter:--spacing(8)]",children:[e.jsx(Z,{children:e.jsxs(L,{children:[e.jsx(j,{className:"whitespace-normal break-words",children:"Name"}),e.jsx(j,{className:"whitespace-normal break-words",children:"Status"}),s.map(x=>e.jsx(j,{className:"font-extrabold whitespace-normal break-words text-primary",children:x.name},x.id))]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-100",children:t.map(x=>e.jsxs(L,{children:[e.jsxs(v,{className:"max-w-52 flex flex-col break-words",children:[e.jsx(de,{type:x.type}),e.jsx("label",{className:"whitespace-normal break-words",children:x.name}),x.description&&e.jsx("small",{className:"italic w-48 whitespace-normal break-words",children:x.description})]}),e.jsx(v,{children:e.jsx(ce,{value:d.get(x.id),transportModeId:x.id,livingLabId:a})}),s.map(p=>e.jsxs(v,{className:"",children:[u.get(p.id)?.result_before?.transport_mode_id===x.id&&e.jsx("small",{children:"Value before"}),e.jsx(S,{livingLabId:a,kpiId:p.id,initial:u.get(p.id)?.result_before,transportModeId:x.id,defaultDate:i,onChange:f=>{g(w=>{const R=new Map(w),_=w.get(p.id);return R.set(p.id,{..._,result_before:{..._?.result_before,...f}}),R})}}),u.get(p.id)?.result_before?.transport_mode_id===x.id&&e.jsxs(e.Fragment,{children:[e.jsx("hr",{}),e.jsx("small",{children:"Value after"}),e.jsx(S,{transportModeId:x.id,livingLabId:a,kpiId:p.id,initial:u.get(p.id)?.result_after,defaultDate:h})]})]},p.id))]},x.id))})]})})]})}function me({type:t="GLOBAL",size:s="sm"}){return e.jsx(N,{size:s,color:t==="GLOBAL"?"primary-light":"secondary",className:"","aria-label":`${t} KPI badge`,children:t})}function Ee({kpis:t=[],livingLabId:s,kpiResults:a=[]}){if(!t||t.length===0)return e.jsx("div",{children:"No KPIs available."});const l=new Map(a.map(n=>[n.id,n])),m=new Date().toISOString().slice(0,10),[c,i]=r.useState(m),[o,h]=r.useState(m);return e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(U,{onChangeBeforeDate:i,onChangeAfterDate:h}),e.jsxs(V,{dense:!0,striped:!0,className:"[--gutter:--spacing(6)] sm:[--gutter:--spacing(8)]",children:[e.jsx(Z,{children:e.jsxs(L,{children:[e.jsx(j,{children:"KPI Number"}),e.jsx(j,{children:"Name"}),e.jsx(j,{children:"Value Before"}),e.jsx(j,{children:"Value After"})]})}),e.jsx(H,{children:t.map((n,d)=>e.jsxs(L,{children:[e.jsxs(v,{className:"flex flex-col w-22",children:[n.kpi_number,e.jsx(me,{type:n.type})]}),e.jsx(v,{className:"max-w-48 whitespace-pre-line break-words",children:n.name}),e.jsx(v,{className:"",children:e.jsx(S,{livingLabId:s,kpiId:n.id,initial:l.get(n.id)?.result_before,defaultDate:c})}),e.jsx(v,{className:"w-34",children:e.jsx(S,{livingLabId:s,kpiId:n.id,initial:l.get(n.id)?.result_after,defaultDate:o})})]},n.kpi_number??d))})]})]})}const xe="modulepreload",ue=function(t){return"/inocs-sum-odp-frontend/"+t},k={},$=function(s,a,l){let m=Promise.resolve();if(a&&a.length>0){let i=function(n){return Promise.all(n.map(d=>Promise.resolve(d).then(u=>({status:"fulfilled",value:u}),u=>({status:"rejected",reason:u}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),h=o?.nonce||o?.getAttribute("nonce");m=i(a.map(n=>{if(n=ue(n),n in k)return;k[n]=!0;const d=n.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${u}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":xe,d||(g.as="script"),g.crossOrigin="",g.href=n,h&&g.setAttribute("nonce",h),document.head.appendChild(g),d)return new Promise((x,p)=>{g.addEventListener("load",x),g.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${n}`)))})}))}function c(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return m.then(i=>{for(const o of i||[])o.status==="rejected"&&c(o.reason);return s().catch(c)})};function Ce({labs:t}){const[s,a]=r.useState(null),[l,m]=r.useState(null);r.useEffect(()=>{let i=!0;async function o(){if(!(typeof window>"u"))try{const h=await $(()=>import("./index.DhzFE7Gx.js"),__vite__mapDeps([0,1,2,3,4,5]));await $(()=>Promise.resolve({}),__vite__mapDeps([6])),i&&m(h)}catch{i&&m(null)}}return o(),()=>{i=!1}},[]);const c=i=>{switch(i){case"complete":return"bg-success";case"incomplete":return"bg-danger";case"in-progress":return"bg-warning"}};return e.jsx("section",{className:"bg-light py-12 px-4 sm:px-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-dark mb-2",children:"Living Labs Across Europe"}),e.jsx("p",{className:"text-dark text-lg",children:"Explore where shared mobility innovation is happening with the SUM project. Click on a city or map marker to view details."})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 h-[600px] rounded shadow overflow-hidden",children:[!l&&e.jsx("div",{className:"flex items-center justify-center h-full w-full bg-gray-100 text-gray-600",children:"Loading map..."}),l&&(()=>{const{MapContainer:i,TileLayer:o,Marker:h,Popup:n,Circle:d}=l;return e.jsxs(i,{center:[48.85,2.35],zoom:5,scrollWheelZoom:!1,className:"h-full w-full z-0",children:[e.jsx(o,{attribution:'Â© <a href="https://osm.org">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map(u=>e.jsxs(e.Fragment,{children:[e.jsx(h,{position:[u.coordinates.lat,u.coordinates.lng],eventHandlers:{click:()=>a(u)}},u.id),e.jsx(d,{center:[u.coordinates.lat,u.coordinates.lng],radius:u.radius,pathOptions:{color:"#2563eb",fillOpacity:.2}})]}))]})})(),s&&e.jsxs("div",{className:" lg:mr-80 bg-white rounded-lg p-3 shadow border border-primary sticky bottom-0 left-0 z-50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h4",{className:"font-bold text-primary",children:[s.name," â€“ Living Lab Overview"]}),e.jsx("button",{onClick:()=>a(null),className:"text-sm text-danger hover:underline",children:"Close"})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-1 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-dark font-semibold",children:"Total Measures"}),e.jsx("div",{className:"text-gray-700",children:s.totalMeasures})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-dark font-semibold",children:"Transport Modes"}),e.jsx("div",{className:"text-gray-700",children:s.transportModes})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-dark font-semibold",children:"KPIs (Before)"}),e.jsx("div",{className:"text-gray-700",children:s.kpisBefore})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-dark font-semibold",children:"KPIs (After)"}),e.jsx("div",{className:"text-gray-700",children:s.kpisAfter})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-dark font-semibold",children:"Sustainable Modal Split"}),e.jsxs("div",{className:"text-success font-medium",children:[s.sustainablePercentage*100,"%"]})]})]}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-1 justify-center",children:e.jsxs(I,{variant:"primary",href:`/inocs-sum-odp-frontend/lab-dashboard/${s.id}`,children:["ðŸ” Explore ",s.name," Living Lab"]})})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4",children:t.map(i=>e.jsxs("div",{onClick:()=>a(i),className:`cursor-pointer p-4 rounded shadow bg-white hover:bg-primary-light transition border-l-4 ${c(i.status)}`,children:[e.jsx("h5",{className:"font-semibold text-primary",children:i.name}),e.jsxs("p",{children:[i.totalMeasures," Measures ",e.jsx("br",{}),i.transportModes," Modes"]})]},i.id))})]})]})})}export{we as CTACard,Ne as LabDashboardTabs,Ee as LivingLabKPIs,Ce as LivingLabsMapSection,ye as TransportModesList};
